<div id="toc">
<div id="toc_header">Table of Contents</div>
<ul>
<li>
<a href="#toc_0">Ficha Metodológica</a>
<ul>
<li>
<ul>
<li>
<a href="#toc_1">Nombre del Indicador:</a>
</li>
<li>
<a href="#toc_2">Definición:</a>
</li>
<li>
<a href="#toc_3">Periodo:</a>
</li>
<li>
<a href="#toc_4">Fuente:</a>
</li>
</ul>
</li>
<li>
<a href="#toc_5">Unidades:</a>
</li>
<li>
<a href="#toc_6">Interpretación:</a>
<ul>
<li>
<a href="#toc_7">Fórmula</a>
</li>
<li>
<a href="#toc_8">Desagregaciones:</a>
</li>
<li>
<a href="#toc_9">Tags:</a>
</li>
<li>
<a href="#toc_10">Código</a>
<ul>
<li>
<a href="#toc_11">Funciones de Preámbulo:</a>
</li>
<li>
<a href="#toc_12">Función del Indicador:</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>


<hr/>

<h2 id="toc_0">Ficha Metodológica</h2>

<hr/>

<h4 id="toc_1">Nombre del Indicador:</h4>

<p>Proporción de nacidos vivos con asistencia de personal de salud</p>

<hr/>

<h4 id="toc_2">Definición:</h4>

<p>La Proporción de nacidos vivos con asistencia de personal de salud es la relación del número de nacimientos atendidos por personal calificado de salud que incluyen Médicos, obstetrices/obstetras, partero/as calificado/as en un periodo de tiempo \(t\) con respecto al total de nacimientos en el mismo periodo. </p>

<hr/>

<h4 id="toc_3">Periodo:</h4>

<p>2013 - 2017</p>

<hr/>

<h4 id="toc_4">Fuente:</h4>

<p>Base de datos de Nacimientos</p>

<!--  -->

<hr/>

<h3 id="toc_5">Unidades:</h3>

<p>Porcentaje</p>

<hr/>

<h3 id="toc_6">Interpretación:</h3>

<p>Un X porciento de nacimientos tuvieron asistencia por personal de salud en el periodo t</p>

<hr/>

<h4 id="toc_7">Fórmula</h4>

<p>\[ PNAPS^t= \frac{\sum_{j}^{k} \sum_i^n{x_{i,j}^t}}{\sum NV^t} \]</p>

<ul>
<li><p>\(PNAPS^t\)    : Proporción de nacidos vivos con asistencia de personal de salud en el periodo <strong>t</strong>.</p></li>
<li><p>\(x_{i,j}^t\): Nacimiento <strong>i</strong> atendido por personal calificado de salud <strong>j</strong> en el periodo <strong>t</strong>.</p></li>
<li><p>\(\sum NV^t\): Total de nacimientos en el periodo <em>t</em>.</p></li>
<li><p>\(i\)        : Nacimiento <strong>i</strong> asistido por personal de salud calificado.</p></li>
<li><p>\(j\)        : Tipo de personal calificado <em>j</em> que asiste el nacimiento \(\epsilon\) (Médico,Ostetriz/Obstetra, Partero/as Calificado/as).</p></li>
</ul>

<hr/>

<h4 id="toc_8">Desagregaciones:</h4>

<pre><code>## Error in a[[params$base]]: attempt to select less than one element in get1index
</code></pre>

<pre><code>## Error in eval(lhs, parent, parent): object &#39;b&#39; not found
</code></pre>

<hr/>

<pre><code>## Error in b$Variable %in% &quot;g_edad&quot;: object &#39;b&#39; not found
</code></pre>

<hr/>

<h4 id="toc_9">Tags:</h4>

<p><strong>Objetivos de Desarrollo Sostenible:</strong></p>

<pre><code>Objetivo 3. Salud y Bienestar
</code></pre>

<p><strong>Plan Nacional de Desarrollo:</strong></p>

<pre><code>Objetivo 1. Garantizar una vida digna con iguales oportunidades para todas las personas.
</code></pre>

<p><strong>Convención sobre los Derechos del Nino:</strong></p>

<pre><code>Artículo 6. Los Estados Partes garantizarán en la máxima medida posible la supervivencia y el desarrollo del niño.
</code></pre>

<hr/>

<h4 id="toc_10">Código</h4>

<hr/>

<p><strong>Software:</strong> R version 3.6.1</p>

<hr/>

<p><strong>Librerias:</strong></p>

<pre><code class="r">library(purrr)
library(dplyr)
library(tidyr)
library(stringr)
library(lubridate)
library(tibble)
</code></pre>

<hr/>

<h5 id="toc_11">Funciones de Preámbulo:</h5>

<pre><code class="r"># Funciones

#Argumentos: 

#f1. Identificacion de personal calificado
#crea la variable &#39;asistido&#39;

fc_asistencia_ps &lt;- function(data, var){

  var &lt;- enquo(var)

  data %&gt;% 

    mutate(asistido= ifelse(str_detect(string = !!var, 
                                       pattern = &#39;MÉDICO|OBSTETR|ENFERMERO/A|CALIF&#39;), 
                            yes = T, 
                            no = F))
}

#f2. funcion de conteo de casos del indicador

fgrupos &lt;- 

  function(data, vars=c(), varindic=NULL) {

    if(is.null(varindic)){

    data %&gt;% group_by_at(.vars = vars) %&gt;% count() %&gt;% ungroup()

    } else {

    data %&gt;% filter_at(.vars = varindic, .vars_predicate =  all_vars(.==1)) %&gt;% 

      group_by_at(.vars = c(vars)) %&gt;% count() %&gt;% ungroup()

    }

  }

#f3. funcion que agrega los datos en funcion de las variables de agrupacion 

summarizador &lt;- function(tabla, vars=NULL, varindicad=NULL) {

  varst &lt;- c(varindicad, vars, &#39;anio_bs&#39;)


  t &lt;- tabla  %&gt;% group_by_at(.vars = varst) %&gt;% 

    summarise(casos=sum(n, na.rm = T)) %&gt;% ungroup() 

  if(!is.null(varindicad)){

    t %&gt;% 

      filter_at(.vars = varindicad, .vars_predicate = all_vars(!is.na(.)))

  }

  t
}
</code></pre>

<h5 id="toc_12">Función del Indicador:</h5>

<pre><code class="r">  #Argumentos

  #tabla  : resultado de la funcion fgrupos()
  #vars   : vector de variables de grupo en character (eg. c(&#39;var1&#39;,&#39;var2&#39;))
  #varindicad: variable del indicador creada con la funcion fc_asistencia_ps


f_p_nac_asis &lt;- function(tabla, 
                         vars=c(), 
                         varindicad=NULL) {

  if(&#39;asis_por&#39; %in% vars){

    v &lt;- vars %&gt;% str_subset(pattern = &#39;asis_por&#39;, negate=T)

  } else {

    v &lt;- vars
  }


  cat_asis &lt;-

    tabla$asis_por %&gt;% table %&gt;% names() %&gt;% 

    str_subset(pattern = &#39;DICO|OBSTE|ENFERMERO|CALIF&#39;)

  t &lt;- 

    tabla %&gt;% mutate(Asistencia=if_else(asis_por %in% cat_asis, 
                                        true = &#39;Personal de Salud&#39;, 
                                        false = &#39;No Personal de Salud&#39;)) %&gt;% 

    filter(Asistencia==&#39;Personal de Salud&#39;) %&gt;% 

    summarizador(vars = vars, varindicad = NULL)



  den &lt;- 

    tabla %&gt;% 

    summarizador(vars = v)

  tf &lt;- 

    t %&gt;% left_join(y = den, by=c(v, &#39;anio_bs&#39;)) %&gt;% 

    rename(numerador=casos.x, denominador=casos.y) %&gt;% 

    mutate(indicador=numerador/denominador*100)

  tf  

}
</code></pre>

